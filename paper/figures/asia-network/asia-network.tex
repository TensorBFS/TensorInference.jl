% !TEX program = lualatex

\documentclass[varwidth=14cm]{standalone}

\usepackage{tikz}

\usepackage[pdfa]{hyperref}
\usepackage{hyperxmp}
\hypersetup{%
  unicode=true,
  pdfapart=3,
  pdfaconformance=B,
  pdftitle={TensorInference: A Julia package for tensor-based
  probabilistic inference},
  pdfauthor={Martin Roa-Villescas, Jin-Guo Liu},
  pdfpublication={Journal of Open Source Software},
  pdfpublisher={Open Journals},
  pdfissn={2475-9066},
  pdfpubtype={journal},
  pdfvolumenum={},
  pdfissuenum={},
  pdfdoi={10.xxxxxx/draft},
  pdfcopyright={Copyright (c) 1970, Martin Roa-Villescas, Jin-Guo
  Liu},
  pdflicenseurl={http://creativecommons.org/licenses/by/4.0/},
  colorlinks=true,
  linkcolor=[rgb]{0.0, 0.5, 1.0},
  citecolor=Blue,
  urlcolor=[rgb]{0.0, 0.5, 1.0},
  breaklinks=true
}

% Set fount used by JOSS papers
\renewcommand\familydefault{\sfdefault}

\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
    \usepackage{fontspec}

  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\sffamily]{Ligatures=TeX}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}

\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
  \usepackage{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}

%% Font settings
\usepackage{fontsetup} % Lazy way to get proper Greek lowercase glyphs

% Use Hack https://sourcefoundry.org/hack/
\setmonofont{Hack}

% \fbox tip:
% - https://tex.stackexchange.com/questions/119984/subfigures-side-by-side-with-captions
\usepackage{subcaption}

% tables generated by quarto-beamer use longtable
\usepackage{booktabs}
\usepackage{longtable}

\usetikzlibrary{arrows.meta}

\begin{document}

\tikzset{ 
  myarrow/.style= {-{Stealth[scale=1.0]},shorten >=2pt},
  myvar/.style={circle, thick, draw=black, minimum size=2.5em},
  table/.style={
    matrix of nodes,
    row sep=-\pgflinewidth,
    column sep=-\pgflinewidth,
    nodes={
      rectangle,
      draw=black,
      align=center
    },
    minimum height=1.5em,
    text depth=0.5ex,
    text height=2ex,
    nodes in empty cells,
    %%
    every even row/.style={
      nodes={fill=gray!20}
    },
    column 1/.style={
      nodes={text width=2em,font=\bfseries}
    },
    row 1/.style={
      nodes={
        fill=black,
        text=white,
        font=\bfseries
      }
    }
  }
}

\begin{minipage}{0.4\textwidth}
  \newsavebox{\mypicture} % proposed by ChatGPT to solve the &-related error
    \begin{lrbox}{\mypicture}
        \begin{tikzpicture}[]
          \matrix[row sep=0.5cm,column sep=0.5cm] {
          % First line
          \node (a) [myvar] {$\underset{\sphericalangle}{A}$};  &
                                                                &
                                                                &
          \node (s) [myvar] {$S$};                              &
                                                              \\
          % Second line
          \node (t) [myvar] {$\underset{?}{T}$};                &
                                                                &
          \node (l) [myvar] {$\underset{?}{L}$};                &
                                                                &
          \node (b) [myvar] {$\underset{?}{B}$};               \\
          % Third line
                                                                &
          \node (e) [myvar] {$E$};                              &
                                                                &
                                                                &
                                                              \\
          % Forth line
          \node (x) [myvar] {$X$};                              &
                                                                &
                                                                &
          \node (d) [myvar] {$\underset{\sphericalangle}{D}$};  &
                                                              \\
          };
          \draw [myarrow]  (a) edge (t);
          \draw [myarrow]  (s) edge (l);
          \draw [myarrow]  (s) edge (b);
          \draw [myarrow]  (t) edge (e);
          \draw [myarrow]  (l) edge (e);
          \draw [myarrow]  (e) edge (x);
          \draw [myarrow]  (e) edge (d);
          \draw [myarrow]  (b) edge (d);
        \end{tikzpicture}
    \end{lrbox}
  \scalebox{0.75}{\usebox{\mypicture}}
\end{minipage}%
\begin{minipage}{0.5\textwidth}
  \begin{longtable}[]{@{}cl@{}}
    \toprule()
    \textbf{Random variable}                                & \textbf{Meaning}                         \\
    \midrule()
    \endhead
    \texttt{A}                                              & Recent trip to Asia                      \\
    \texttt{T}                                              & Patient has tuberculosis                 \\
    \texttt{S}                                              & Patient is a smoker                      \\
    \texttt{L}                                              & Patient has lung cancer                  \\
    \texttt{B}                                              & Patient has bronchitis                   \\
    \texttt{E}                                              & Patient has \texttt{T} and/or \texttt{L} \\
    \texttt{X}                                              & Chest X-Ray is positive                  \\
    \texttt{D}                                              & Patient has dyspnea                      \\
    \bottomrule()
  \end{longtable}
\end{minipage}

\end{document}
